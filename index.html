<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ GameBoy Birthday Gift + PACMAN</title>
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(45deg, #1a1a2e, #16213e, #0f3460);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        /* ===== CLOUD BACKGROUND ===== */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 100" opacity="0.1"><path fill="white" d="M30 50 Q40 30 60 30 Q80 30 90 50 Q100 70 80 80 Q60 90 40 80 Q20 70 30 50"/><path fill="white" d="M130 40 Q140 20 160 20 Q180 20 190 40 Q200 60 180 70 Q160 80 140 70 Q120 60 130 40"/></svg>');
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: moveClouds 60s linear infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes moveClouds {
            0% { background-position: 0 0; }
            100% { background-position: 1000px 0; }
        }

        #gameboy-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }

        /* ===== SCREEN TRANSITIONS ===== */
        .screen {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
        }

        .screen.active {
            display: flex !important;
            opacity: 1;
            transform: translateY(0);
        }

        /* ===== LOADING SCREEN ===== */
        #loading-screen .gameboy-screen {
            width: 600px;
            height: 400px;
            background: #000;
            border: 4px solid #00ff00;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #loading-screen .screen-content {
            text-align: center;
            width: 100%;
            padding: 40px;
        }

        #loading-screen .title {
            font-size: 48px;
            font-weight: bold;
            color: #00ff00;
            margin-bottom: 40px;
            letter-spacing: 4px;
            animation: glow 1.5s infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px #00ff00; }
            to { text-shadow: 0 0 20px #00ff00, 0 0 30px #00ff00; }
        }

        #loading-screen .loading-text {
            font-size: 24px;
            color: #00ff00;
            margin-bottom: 30px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% { opacity: 0.5; }
        }

        .progress-bar {
            width: 80%;
            height: 30px;
            background: #333;
            border: 2px solid #00ff00;
            margin: 0 auto;
            position: relative;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #00ff00;
            width: 0%;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #000;
            font-weight: bold;
            font-size: 16px;
            z-index: 2;
        }

        /* ===== MAIN GAMEBOY ===== */
        .gameboy-body {
            width: 400px;
            height: 600px;
            background: linear-gradient(145deg, #e8e8e8, #d0d0d0);
            border-radius: 20px 20px 40px 40px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.8);
            position: relative;
            z-index: 2;
        }

        .gameboy-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 12px;
            color: #666;
        }

        .power-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .power-dot {
            width: 8px;
            height: 8px;
            background: #ff4444;
            border-radius: 50%;
            animation: powerBlink 2s infinite;
        }

        @keyframes powerBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .brand-text {
            font-weight: bold;
            font-size: 14px;
        }

        .gameboy-screen {
            width: 100%;
            height: 200px;
            background: #2d5016;
            border: 8px solid #1a1a1a;
            border-radius: 8px;
            margin-bottom: 20px;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .gameboy-screen .screen-content {
            padding: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .birthday-title {
            color: #9bbc0f;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #9bbc0f;
        }

        .start-text {
            color: #ffff00;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .screen-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            font-size: 8px;
            color: #666;
        }

        .battery {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .battery-dot {
            width: 4px;
            height: 4px;
            background: #ff4444;
            border-radius: 50%;
        }

        /* ===== MENU BUTTONS ===== */
        .menu-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 30px;
        }

        .menu-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            text-transform: uppercase;
            color: white;
        }

        .menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .menu-btn:active {
            transform: translateY(0);
        }

        .message-btn { background: linear-gradient(145deg, #4a90e2, #357abd); }
        .gallery-btn { background: linear-gradient(145deg, #e74c3c, #c0392b); }
        .music-btn { background: linear-gradient(145deg, #9b59b6, #8e44ad); }
        .tetris-btn { background: linear-gradient(145deg, #27ae60, #229954); }
        .pacman-btn { background: linear-gradient(145deg, #f39c12, #e67e22); }

        /* ===== CONTROLS ===== */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .dpad {
            width: 100px;
            height: 100px;
            position: relative;
        }

        .dpad-center {
            width: 100%;
            height: 100%;
            background: #333;
            position: relative;
            border-radius: 50%;
        }

        .dpad-center div {
            position: absolute;
            background: #555;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }

        .dpad-center div:hover {
            background: #666;
        }

        .dpad-up, .dpad-down {
            width: 40px;
            height: 30px;
            left: 50%;
            transform: translateX(-50%);
        }

        .dpad-up { top: 5px; border-radius: 8px 8px 0 0; }
        .dpad-down { bottom: 5px; border-radius: 0 0 8px 8px; }
        .dpad-left, .dpad-right {
            width: 30px;
            height: 40px;
            top: 50%;
            transform: translateY(-50%);
        }

        .dpad-left { left: 5px; border-radius: 8px 0 0 8px; }
        .dpad-right { right: 5px; border-radius: 0 8px 8px 0; }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            font-weight: bold;
            font-size: 20px;
            cursor: pointer;
            background: linear-gradient(145deg, #e74c3c, #c0392b);
            color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: all 0.2s;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }

        .action-btn:active {
            transform: translateY(0);
        }

        /* ===== BOTTOM CONTROLS ===== */
        .bottom-controls {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .control-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            background: #666;
            color: white;
            font-family: inherit;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .control-btn:hover {
            background: #777;
            transform: translateY(-1px);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .speaker-grille {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle at 25% 25%, #333 2px, transparent 2px),
                        radial-gradient(circle at 75% 25%, #333 2px, transparent 2px),
                        radial-gradient(circle at 25% 75%, #333 2px, transparent 2px),
                        radial-gradient(circle at 75% 75%, #333 2px, transparent 2px);
            background-size: 8px 8px;
        }

        /* ===== PAGE CONTAINER ===== */
        .page-container {
            width: 400px;
            height: 600px;
            background: linear-gradient(145deg, #7b68ee, #6a5acd);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 4px solid #ffd700;
            display: flex;
            flex-direction: column;
            z-index: 2;
        }

        .page-screen {
            flex: 1;
            background: #2d5016;
            border: 4px solid #1a1a1a;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .page-header {
            background: #1a1a1a;
            color: #9bbc0f;
            padding: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        .page-controls {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .page-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            background: #4a90e2;
            color: white;
            transition: all 0.2s;
        }

        .page-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .page-btn:active {
            transform: translateY(0);
        }

        /* ===== MESSAGE SCREEN ===== */
        .message-content {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            color: #9bbc0f;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .message-content::-webkit-scrollbar {
            width: 4px;
        }

        .message-content::-webkit-scrollbar-thumb {
            background: #9bbc0f;
            border-radius: 2px;
        }

        .letter-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            padding: 10px;
            background: #1a1a2e;
            border-bottom: 2px solid #9bbc0f;
        }

        .letter-btn {
            flex: 1;
            min-width: 60px;
            padding: 8px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .letter-btn:hover {
            background: #357abd;
            transform: scale(1.05);
        }

        .letter-btn.active {
            background: #f39c12;
            color: #000;
            font-weight: bold;
        }

        .skip-btn {
            margin: 10px auto;
            padding: 6px 12px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            width: fit-content;
            transition: all 0.2s;
        }

        .skip-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .skip-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <div id="gameboy-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="screen active">
            <div class="gameboy-screen">
                <div class="screen-content">
                    <h1 class="title">BIRTHDAY GIFT</h1>
                    <div class="loading-text" id="loading-text">&gt; INITIALIZING..._</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                        <div class="progress-text" id="progress-text">0%</div>
                    </div>
                </div>
            </div>
    </div>
    <!-- Main Screen -->
<div id="main-screen" class="screen">
    <div class="gameboy-body">
        <div class="gameboy-header">
            <div class="power-indicator">
                <span class="power-dot"></span>
                <span class="power-text">POWER</span>
            </div>
            <div class="brand-text">GAME-BOY</div>
        </div>
        
        <div class="gameboy-screen">
            <div class="screen-content">
                <h1 class="birthday-title">Happy Birthday!</h1>
                <div class="start-text">Press START</div>
                <div class="screen-info">
                    <span class="dot-matrix">DOT MATRIX WITH STEREO SOUND</span>
                    <span class="battery">
                        <span class="battery-dot"></span>
                        BATTERY
                    </span>
                </div>
            </div>
        </div>

        <div class="menu-buttons">
            <button class="menu-btn message-btn" onclick="showScreen('message')">MESSAGE</button>
            <button class="menu-btn gallery-btn" onclick="showScreen('gallery')">GALLERY</button>
            <button class="menu-btn music-btn" onclick="showScreen('music')">MUSIC</button>
            <button class="menu-btn tetris-btn" onclick="showScreen('tetris')">TETRIS</button>
            <button class="menu-btn pacman-btn" onclick="showScreen('pacman')">PACMAN</button>
        </div>

        <div class="controls">
            <div class="dpad">
                <div class="dpad-center">
                    <div class="dpad-up" onclick="navigateMenu('up')">‚Üë</div>
                    <div class="dpad-left" onclick="navigateMenu('left')">‚Üê</div>
                    <div class="dpad-right" onclick="navigateMenu('right')">‚Üí</div>
                    <div class="dpad-down" onclick="navigateMenu('down')">‚Üì</div>
                </div>
            </div>
            <div class="action-buttons">
                <button class="action-btn b-btn" onclick="pressB()">B</button>
                <button class="action-btn a-btn" onclick="pressA()">A</button>
            </div>
        </div>

        <div class="bottom-controls">
            <button class="control-btn select-btn" onclick="pressSelect()">SELECT</button>
            <button class="control-btn start-btn" onclick="showScreen('main')">START</button>
        </div>

        <div class="speaker-grille"></div>
    </div>
</div>

<!-- Message Screen -->
<div id="message-screen" class="screen">
    <div class="page-container">
        <div class="page-screen">
            <div class="page-header">üìù MESSAGE</div>
            
            <div class="letter-selector">
                <button class="letter-btn" onclick="selectLetter(0)">üì® 1</button>
                <button class="letter-btn" onclick="selectLetter(1)">üì® 2</button>
                <button class="letter-btn" onclick="selectLetter(2)">üì® 3</button>
                <button class="letter-btn" onclick="selectLetter(3)">üì® 4</button>
                <button class="letter-btn" onclick="selectLetter(4)">üì® 5</button>
                <button class="letter-btn" onclick="selectLetter(5)">üì® 6</button>
            </div>
            
            <div class="message-content" id="message-content"></div>
            <button class="skip-btn" id="skip-btn">SKIP</button>
        </div>
        <div class="page-controls">
            <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
        </div>
    </div>
</div>

<!-- Gallery Screen -->
<div id="gallery-screen" class="screen">
    <div class="page-container">
        <div class="page-screen">
            <div class="page-header">üñºÔ∏è GALLERY</div>
            <div class="gallery-content">
                <div class="photobox-header">
                    <div class="photobox-dot red"></div>
                    <span class="photobox-title">PHOTOBOX</span>
                    <div class="photobox-dot green"></div>
                </div>
                <div class="photobox-progress" id="photobox-progress">üì∏ READY TO PRINT</div>
                <div class="photo-display" id="photo-display">
                    <div class="photo-placeholder">Press START PRINT to begin</div>
                </div>
                <div class="photobox-controls">
                    <button class="photo-btn" id="photo-btn">START PRINT</button>
                </div>
            </div>
        </div>
        <div class="page-controls">
            <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
        </div>
    </div>
</div>
    <!-- Music Screen -->
    <div id="music-screen" class="screen">
        <div class="page-container">
            <div class="page-screen">
                <div class="page-header">üéµ MUSIC</div>
                <div class="music-content">
                    <div class="playlist">
                        <div class="song" data-index="0" onclick="playSong(0)">üéµ 1. Happy Birthday</div>
                        <div class="song" data-index="1" onclick="playSong(1)">üéµ 2. My Love Mine All Mine - Mitski</div>
                        <div class="song" data-index="2" onclick="playSong(2)">üéµ 3. Line Without a Hook - Ricky Montgomery</div>
                        <div class="song" data-index="3" onclick="playSong(3)">üéµ 4. 505 - Arctic Monkeys</div>
                        <div class="song" data-index="4" onclick="playSong(4)">üéµ 5. RUDE! - Hearts2Hearts</div>
                        <div class="song" data-index="5" onclick="playSong(5)">üéµ 6. Really Like You - BABYMONSTER</div>
                    </div>
                    <div class="music-controls">
                        <button onclick="prevSong()">‚èÆ</button>
                        <button onclick="playPause()" id="play-pause-btn">‚èØ</button>
                        <button onclick="nextSong()">‚è≠</button>
                    </div>
                    <div class="now-playing" id="now-playing">üéú Not Playing</div>
                    
                    <div class="stats-panel">
                        <div class="stats-row">
                            <span>Messages Read:</span>
                            <span class="stats-value" id="stats-messages">0</span>
                        </div>
                        <div class="stats-row">
                            <span>Photos Viewed:</span>
                            <span class="stats-value" id="stats-photos">0</span>
                        </div>
                        <div class="stats-row">
                            <span>Games Played:</span>
                            <span class="stats-value" id="stats-games">0</span>
                        </div>
                        <div class="stats-row">
                            <span>Songs Played:</span>
                            <span class="stats-value" id="stats-songs">0</span>
                        </div>
                        <div class="stats-row">
                            <span>Pacman Score:</span>
                            <span class="stats-value" id="stats-pacman">0</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-controls">
                <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
                <button class="page-btn" onclick="showCake()">üéÇ CAKE</button>
            </div>
        </div>
    </div>

    <!-- Tetris Screen -->
    <div id="tetris-screen" class="screen">
        <div class="page-container">
            <div class="page-screen">
                <div class="tetris-header">
                    <div class="tetris-title">üéÆ TETRIS</div>
                    <div class="tetris-stats">
                        <div class="stat">Score: <span id="score">0</span></div>
                        <div class="stat">Level: <span id="level">1</span></div>
                        <div class="stat">Lines: <span id="lines">0</span></div>
                    </div>
                </div>
                <div class="tetris-game">
                    <canvas id="tetris-canvas" width="300" height="400"></canvas>
                </div>
                <div class="tetris-controls">
                    <button class="tetris-btn" onclick="moveTetrisPiece(-1)">‚óÄ</button>
                    <button class="tetris-btn" onclick="rotateTetrisPiece()">‚Üª ROTATE</button>
                    <button class="tetris-btn" onclick="moveTetrisPiece(1)">‚ñ∂</button>
                    <button class="tetris-btn" onclick="startTetrisGame()">üîÑ NEW</button>
                </div>
            </div>
            <div class="page-controls">
                <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
            </div>
        </div>
    </div>

    <!-- Pacman Screen -->
    <div id="pacman-screen" class="screen">
        <div class="page-container">
            <div class="page-screen">
                <div class="pacman-header">üëæ PACMAN</div>
                <div class="pacman-stats">
                    <div class="stat">Score: <span id="pacman-score">0</span></div>
                    <div class="stat">Level: <span id="pacman-level">1</span></div>
                </div>
                <div class="pacman-game">
                    <canvas id="pacman-canvas" width="300" height="300"></canvas>
                </div>
                <div class="pacman-controls">
                    <button class="pacman-btn" onclick="startPacman()">üîÑ NEW GAME</button>
                    <button class="pacman-btn" onclick="pausePacman()">‚èØ PAUSE</button>
                </div>
                <div class="pacman-controls" style="margin-top: 5px;">
                    <button class="pacman-btn" onclick="movePacman('up')">‚Üë</button>
                    <button class="pacman-btn" onclick="movePacman('left')">‚Üê</button>
                    <button class="pacman-btn" onclick="movePacman('down')">‚Üì</button>
                    <button class="pacman-btn" onclick="movePacman('right')">‚Üí</button>
                </div>
            </div>
            <div class="page-controls">
                <button class="page-btn back-btn" onclick="showScreen('main')">BACK</button>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="game-over-modal" class="modal">
        <div class="modal-content">
            <div class="game-over-text">GAME OVER</div>
            <button class="modal-btn" onclick="closeGameOver()">OK</button>
        </div>
    </div>

    <!-- Final Message Modal -->
    <div id="final-message-modal" class="modal">
        <div class="modal-content">
            <div class="final-message-title">üéÇ HAPPY BIRTHDAY! üéÇ</div>
            <div class="final-message-text">
                <p>Even if you lose in the game,</p>
                <p>you always win in my heart!</p>
                <p class="love-text">I LOVE YOU TWIN üíï</p>
            </div>
            <button class="modal-btn" onclick="closeFinal()">OK</button>
        </div>
    </div>

    <!-- Birthday Cake Modal -->
    <div id="cake-modal" class="modal">
        <div class="modal-content">
            <div class="cake-container">
                <div class="cake">
                    <div class="plate"></div>
                    <div class="layer layer-bottom"></div>
                    <div class="layer layer-middle"></div>
                    <div class="layer layer-top"></div>
                    <div class="icing"></div>
                    <div class="candle" id="birthday-candle" onclick="blowCandle()">
                        <div class="flame" id="flame"></div>
                    </div>
                </div>
                <p class="cake-message" id="cake-message">Happy Birthday, Mango! üéÇ</p>
                <button class="modal-btn" onclick="closeCake()">Close</button>
            </div>
        </div>
    </div>

    <!-- Secret Easter Egg Modal -->
    <div id="secret-modal" class="modal">
        <div class="modal-content">
            <div class="final-message-title">üéÆ SECRET UNLOCKED! üéÆ</div>
            <div class="final-message-text">
                <p>You found the secret code!</p>
                <p class="love-text">Mango is the best TWIN ever! üíï</p>
                <p>üïπÔ∏è KONAMI CODE ACTIVATED üïπÔ∏è</p>
            </div>
            <button class="modal-btn" onclick="closeSecret()">OK</button>
        </div>
    </div>
</div>

<div class="secret-message" id="secret-message">
    üéÆ SECRET CODE ACTIVATED! üéÆ<br>
    YOU ARE AWESOME, MANGO!
                            </div>
                                <script>
        // Game state
        let currentScreen = 'loading';
        let tetrisGame = null;
        let gameScore = 0;
        let gameLevel = 1;
        let gameLines = 0;
        let typewriterInterval = null;
        let isTyping = false;
        let currentPhotoIndex = 0;
        let currentSongIndex = 0;
        let isPlaying = false;
        let gameOverTimer = null;
        let audioPlayer = null;
        let currentLetterIndex = 0;
        
        // Pacman variables
        let pacmanGame = null;
        let pacmanInterval = null;
        let pacmanPaused = false;
        
        // Stats
        let stats = {
            messagesRead: 0,
            photosViewed: 0,
            gamesPlayed: 0,
            songsPlayed: 0,
            pacmanScore: 0
        };
        
        // Easter egg tracking
        let konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        let konamiIndex = 0;
        let selectPressCount = 0;
        let selectTimer = null;

        // ===== SURAT-SURAT UNTUK MANGO =====
        const letters = [
            // Surat 1
            `Hi, Miyu ‚Äî or as I often call you, Mango.

I suddenly realized: we've come this far together, and I don't think I've ever thanked you properly.

Thank you for being such a... weird TWIN.
In the most positive way possible.

You're so kind. Sometimes I think, "How can Mango be this patient with me?"
Patient ‚Äî even though I know I sometimes annoy you with the same old antics.

You're also loud. Super loud.
When we hang out, there's never a dull moment. Your voice is like the most comforting background noise in my life.
Chatty, talkative, love to nag. But somehow, when I don't hear your voice, something feels missing.

Caring. So much.
Down to the little things others don't notice.
You always know when to send a message, when to show up, when to just sit beside me in silence.

Attentive. Sometimes it makes me think, "Wow, Mango really looks out for me."
You're beautiful ‚Äî that's a fact.
But what makes you different isn't just your looks, but the way you see the world: always finding room to laugh, even in the hardest times.

Funny, humorous, love to joke.
You're the type of person who can make people mad, but also make them forget why they were angry.
Because beneath all your randomness, there's a heart that's incredibly sincere.

You don't dwell on things ‚Äî that's what I admire most.
You're the type who says, "Problem? Okay, next." Not because you don't feel, but because you choose not to drown. And that's really cool.

Most importantly: you always make my day colorful.
Even on the grayest days, you show up ‚Äî through chats, through stories, through your random antics ‚Äî and everything becomes a little brighter.

Thank you for being a place to come home to, a place to share stories, a place to laugh, a place to cry, and a place to just be myself without fear of judgment.

Thank you for choosing to be my TWIN, out of thousands of people.

I love you, Mango ‚Äî as a TWIN.
Never change.
Keep being you ‚Äî annoying, loud, funny, caring, and always making life a little less quiet.

‚Äî From someone who's always proud of you,  
ItsZio & Uncle Vic üíï`,

            // Surat 2
            `Dear Mango,

Remember when we first met? I didn't expect that someone could be this... loud, weird, and amazing all at once.

You came into my life like a hurricane ‚Äî chaotic, unstoppable, and somehow exactly what I needed. You brought color to my gray days and laughter to my quiet moments.

Thank you for every random chat at 2 AM, for every stupid joke that made me laugh anyway, for every time you checked in on me just because.

Those are the moments I'll always treasure.

‚Äî Your TWIN forever`,

            // Surat 3
            `Mango,

You were there when I was at my lowest. When I couldn't find the words, you just sat with me in silence. When I needed someone, you showed up without being asked.

I never told you this, but that meant everything.

You didn't try to fix me ‚Äî you just stayed. And sometimes, that's exactly what someone needs.

Thank you for being my anchor.

‚Äî Always grateful`,

            // Surat 4
            `Mango,

I love how you can talk about the most random things for hours:
- Why cats are better than dogs (wrong opinion, but okay)
- What if we could talk to plants
- That one dream you had where you were a detective
- Why the moon looks sad sometimes

Your mind is such a weird, beautiful place. I'm glad I get to visit it.

‚Äî Your fellow weirdo`,

            // Surat 5
            `Dear Mango,

I don't know where life will take us. Maybe we'll be neighbors. Maybe we'll live in different countries. Maybe we'll still be sending each other memes at 3 AM when we're 80.

But I know one thing: no matter where we are, you'll always be my TWIN.

‚Äî Yours always`,

            // Surat 6
            `My Dearest Mango,

If I had to describe you in one word, it would be: HOME.

Not a place, but a feeling. The feeling of being understood without explanation. The feeling of being accepted without condition.

You are my home, Mango. And I hope I'm yours too.

‚Äî Love, your TWIN üíï`
        ];

        // Photos WITH IMAGE PATHS
        const photos = [
            { text: 'TWIN MEMORY TRIO üéÆ', image: './images/photo1.jpg' },
            { text: 'TWIN MEMORY TRIO üéÇ', image: './images/photo2.jpg' },
            { text: 'TWIN MEMORY TRIO ü§™', image: './images/photo3.jpg' },
            { text: 'TWIN MEMORY TRIO üí™', image: './images/photo4.jpg' },
            { text: 'TWIN MEMORY TRIO üòÇ', image: './images/photo5.jpg' },
            { text: 'TWIN MEMORY TRIO üåà', image: './images/photo6.jpg' },
            { text: 'TWIN MEMORY TRIO üéâ', image: './images/photo7.jpg' },
            { text: 'TWIN MEMORY TRIO üôè', image: './images/photo8.jpg' }
        ];

        // Song titles
        const songTitles = [
            'Happy Birthday',
            'My Love Mine All Mine - Mitski',
            'Line Without a Hook - Ricky Montgomery',
            '505 - Arctic Monkeys',
            'RUDE! - Hearts2Hearts',
            'Really Like You - BABYMONSTER'
        ];

        // Audio files
        const audioFiles = [
            './songs/happy-birthday.mp3',
            './songs/my-love-mine-all-mine.mp3',
            './songs/line-without-a-hook.mp3',
            './songs/505.mp3',
            './songs/rude.mp3',
            './songs/really-like-you.mp3'
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            loadStats();
        });

        function initializeApp() {
            simulateLoading();
            initializeTetris();
            initializePacman();
        }

        function simulateLoading() {
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            const loadingText = document.getElementById('loading-text');
            
            let progress = 0;
            const messages = [
                'INITIALIZING..._',
                'LOADING MEMORIES..._',
                'PREPARING SURPRISE..._',
                'ALMOST READY..._',
                'LOADING COMPLETE!_'
            ];
            
            const interval = setInterval(() => {
                progress += Math.floor(Math.random() * 10) + 5;
                if (progress > 100) progress = 100;
                
                progressFill.style.width = progress + '%';
                progressText.textContent = progress + '%';
                
                const msgIndex = Math.floor((progress / 100) * (messages.length - 1));
                loadingText.textContent = '> ' + messages[msgIndex];
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        showScreen('main');
                    }, 1000);
                }
            }, 200);
        }

        window.showScreen = function(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            const targetScreen = document.getElementById(screenId + '-screen');
            if (targetScreen) {
                targetScreen.classList.add('active');
                currentScreen = screenId;
                
                if (screenId === 'message') initializeMessage();
                if (screenId === 'gallery') initializeGallery();
                if (screenId === 'music') initializeMusic();
                if (screenId === 'tetris' && tetrisGame && !tetrisGame.gameRunning) {
                    startTetrisGame();
                }
            }
        };

        function setupEventListeners() {
            document.getElementById('skip-btn')?.addEventListener('click', skipMessage);
            document.getElementById('photo-btn')?.addEventListener('click', startPhotoShow);
            document.addEventListener('keydown', handleKeyPress);
        }
        
        // Easter egg handlers
        function handleKeyPress(e) {
            const key = e.key;
            
            if (key === konamiCode[konamiIndex]) {
                konamiIndex++;
                if (konamiIndex === konamiCode.length) {
                    activateEasterEgg();
                    konamiIndex = 0;
                }
            } else {
                konamiIndex = 0;
            }
        }
        
        function pressSelect() {
            selectPressCount++;
            
            if (selectTimer) clearTimeout(selectTimer);
            
            selectTimer = setTimeout(() => {
                if (selectPressCount >= 3) {
                    activateEasterEgg();
                }
                selectPressCount = 0;
            }, 1000);
        }
        
        function pressA() { console.log('A button pressed'); }
        function pressB() { console.log('B button pressed'); }
        function navigateMenu(direction) { console.log('Navigating:', direction); }
        
        function activateEasterEgg() {
            document.getElementById('secret-modal').classList.add('active');
            selectPressCount = 0;
        }
        
        function closeSecret() {
            document.getElementById('secret-modal').classList.remove('active');
        }
        
        // Stats functions
        function updateStats(statName) {
            stats[statName]++;
            saveStats();
            displayStats();
        }
        
        function saveStats() {
            localStorage.setItem('gameboyStats', JSON.stringify(stats));
        }
        
        function loadStats() {
            const saved = localStorage.getItem('gameboyStats');
            if (saved) {
                stats = JSON.parse(saved);
            }
            displayStats();
        }
        
        function displayStats() {
            document.getElementById('stats-messages').textContent = stats.messagesRead || 0;
            document.getElementById('stats-photos').textContent = stats.photosViewed || 0;
            document.getElementById('stats-games').textContent = stats.gamesPlayed || 0;
            document.getElementById('stats-songs').textContent = stats.songsPlayed || 0;
            document.getElementById('stats-pacman').textContent = stats.pacmanScore || 0;
        }
                                    // Message functions
function selectLetter(index) {
    currentLetterIndex = index;
    
    document.querySelectorAll('.letter-btn').forEach((btn, i) => {
        if (i === index) btn.classList.add('active');
        else btn.classList.remove('active');
    });
    
    if (typewriterInterval) clearInterval(typewriterInterval);
    
    const messageContent = document.getElementById('message-content');
    messageContent.innerHTML = '';
    
    let charIndex = 0;
    isTyping = true;
    
    typewriterInterval = setInterval(() => {
        if (charIndex < letters[index].length) {
            const char = letters[index][charIndex];
            messageContent.innerHTML += char === '\n' ? '<br>' : char;
            charIndex++;
            messageContent.scrollTop = messageContent.scrollHeight;
        } else {
            clearInterval(typewriterInterval);
            isTyping = false;
            updateStats('messagesRead');
        }
    }, 50);
}

function initializeMessage() {
    selectLetter(0);
}

function skipMessage() {
    if (isTyping && typewriterInterval) {
        clearInterval(typewriterInterval);
        const messageContent = document.getElementById('message-content');
        messageContent.innerHTML = letters[currentLetterIndex].replace(/\n/g, '<br>');
        isTyping = false;
        updateStats('messagesRead');
    }
}

// Gallery functions
function initializeGallery() {
    const photoDisplay = document.getElementById('photo-display');
    photoDisplay.innerHTML = '<div class="photo-placeholder">Press START PRINT to begin</div>';
    document.getElementById('photobox-progress').textContent = 'üì∏ READY TO PRINT';
    document.getElementById('photo-btn').disabled = false;
    document.getElementById('photo-btn').textContent = 'START PRINT';
    currentPhotoIndex = 0;
}

function startPhotoShow() {
    const photoBtn = document.getElementById('photo-btn');
    const photoDisplay = document.getElementById('photo-display');
    const progressDiv = document.getElementById('photobox-progress');
    
    photoBtn.disabled = true;
    photoBtn.textContent = 'PRINTING...';
    progressDiv.textContent = 'INITIALIZING CAMERA...';
    
    let framesHTML = '';
    for (let i = 0; i < photos.length; i++) {
        framesHTML += `
            <div class="photo-frame" id="frame-${i+1}" onclick="enlargePhoto(${i})">
                <div class="photo-content" style="color:#333;">READY</div>
            </div>
        `;
    }
    
    photoDisplay.innerHTML = `
        <div style="display:flex; flex-direction:column; width:100%;">
            <div style="text-align:center; color:#9bbc0f; margin-bottom:5px; font-weight:bold;">PHOTOSTRIP SESSION</div>
            <div style="max-height:250px; overflow-y:auto; padding:5px;">
                ${framesHTML}
            </div>
            <div style="text-align:center; color:#9bbc0f; margin-top:5px; font-weight:bold;">üéÇ HAPPY BIRTHDAY! üéÇ</div>
        </div>
    `;
    
    currentPhotoIndex = 0;
    
    let countdown = 3;
    progressDiv.textContent = `GET READY... ${countdown}`;
    
    const countdownInterval = setInterval(() => {
        countdown--;
        if (countdown > 0) {
            progressDiv.textContent = `GET READY... ${countdown}`;
        } else {
            clearInterval(countdownInterval);
            progressDiv.textContent = 'SMILE! üì∏';
            startPhotoCapture();
        }
    }, 1000);
}

function startPhotoCapture() {
    const progressDiv = document.getElementById('photobox-progress');
    
    const captureInterval = setInterval(() => {
        if (currentPhotoIndex < photos.length) {
            const frame = document.getElementById(`frame-${currentPhotoIndex + 1}`);
            
            if (frame) {
                progressDiv.textContent = '‚ú® FLASH! ‚ú®';
                
                setTimeout(() => {
                    frame.classList.add('filled');
                    const photo = photos[currentPhotoIndex];
                    
                    const img = document.createElement('img');
                    img.src = photo.image;
                    img.alt = photo.text;
                    img.className = 'photo-image';
                    
                    frame.innerHTML = '';
                    frame.appendChild(img);
                    
                    const overlay = document.createElement('div');
                    overlay.className = 'photo-overlay';
                    overlay.textContent = photo.text;
                    frame.appendChild(overlay);
                    
                    const displayCount = currentPhotoIndex + 1;
                    progressDiv.textContent = `CAPTURED ${displayCount}/${photos.length}`;
                    currentPhotoIndex++;
                    updateStats('photosViewed');
                }, 500);
            } else {
                currentPhotoIndex++;
            }
        } else {
            clearInterval(captureInterval);
            
            setTimeout(() => {
                progressDiv.textContent = 'üéâ PHOTO STRIP COMPLETE! üéâ';
                document.getElementById('photo-btn').textContent = 'PRINT AGAIN';
                document.getElementById('photo-btn').disabled = false;
            }, 2000);
        }
    }, 1500);
}

function enlargePhoto(index) {
    alert(`Photo ${index + 1}: ${photos[index].text}`);
                                    }
                                    // Music functions
function initializeMusic() {
    if (!audioPlayer) {
        audioPlayer = new Audio();
        audioPlayer.addEventListener('ended', nextSong);
        audioPlayer.addEventListener('error', function() {
            document.getElementById('now-playing').textContent = 'üéú Error loading audio';
        });
    }
    
    updateNowPlaying();
    document.querySelectorAll('.song').forEach((song, index) => {
        if (index === currentSongIndex) {
            song.classList.add('playing');
        } else {
            song.classList.remove('playing');
        }
    });
}

function playSong(index) {
    if (index < 0 || index >= 6) return;
    
    currentSongIndex = index;
    
    if (audioPlayer) {
        audioPlayer.src = audioFiles[currentSongIndex];
        audioPlayer.load();
        audioPlayer.play().catch(e => {
            document.getElementById('now-playing').textContent = 'üéú Click play to start';
        });
        isPlaying = true;
        document.getElementById('play-pause-btn').textContent = '‚è∏';
        updateStats('songsPlayed');
    }
    
    updateNowPlaying();
    
    document.querySelectorAll('.song').forEach((song, i) => {
        if (i === currentSongIndex) {
            song.classList.add('playing');
        } else {
            song.classList.remove('playing');
        }
    });
}

function playPause() {
    if (!audioPlayer) return;
    
    if (isPlaying) {
        audioPlayer.pause();
        document.getElementById('play-pause-btn').textContent = '‚èØ';
    } else {
        if (!audioPlayer.src) {
            playSong(currentSongIndex);
        } else {
            audioPlayer.play().catch(e => console.log('Playback failed:', e));
        }
        document.getElementById('play-pause-btn').textContent = '‚è∏';
    }
    isPlaying = !isPlaying;
}

function prevSong() {
    let newIndex = currentSongIndex - 1;
    if (newIndex < 0) newIndex = 5;
    playSong(newIndex);
}

function nextSong() {
    let newIndex = currentSongIndex + 1;
    if (newIndex >= 6) newIndex = 0;
    playSong(newIndex);
}

function updateNowPlaying() {
    document.getElementById('now-playing').textContent = `üéú Now Playing: ${songTitles[currentSongIndex]}`;
}

// Cake functions
function showCake() {
    document.getElementById('cake-modal').classList.add('active');
}

function closeCake() {
    document.getElementById('cake-modal').classList.remove('active');
}

function blowCandle() {
    const candle = document.getElementById('birthday-candle');
    const flame = document.getElementById('flame');
    const message = document.getElementById('cake-message');
    
    candle.classList.add('blown');
    message.textContent = 'üéâ HAPPY BIRTHDAY, MANGO! üéâ';
    
    setTimeout(() => {
        activateEasterEgg();
    }, 1000);
}

// Modal functions
function closeGameOver() {
    document.getElementById('game-over-modal').classList.remove('active');
    showScreen('main');
}

function closeFinal() {
    document.getElementById('final-message-modal').classList.remove('active');
    showScreen('main');
                                    }
                                            // Tetris functions
        function initializeTetris() {
            tetrisGame = {
                board: Array(20).fill().map(() => Array(10).fill(0)),
                currentPiece: null,
                gameRunning: false
            };
        }

        function startTetrisGame() {
            tetrisGame.gameRunning = true;
            gameScore = 0;
            gameLevel = 1;
            gameLines = 0;
            updateTetrisStats();
            drawTetrisBoard();
            updateStats('gamesPlayed');
            
            if (gameOverTimer) clearTimeout(gameOverTimer);
            gameOverTimer = setTimeout(() => {
                if (tetrisGame?.gameRunning) {
                    gameOver();
                }
            }, 10000);
        }

        function moveTetrisPiece(direction) {
            if (!tetrisGame?.gameRunning) return;
            console.log('Moving piece:', direction);
        }

        function rotateTetrisPiece() {
            if (!tetrisGame?.gameRunning) return;
            console.log('Rotating piece');
        }

        function updateTetrisStats() {
            document.getElementById('score').textContent = gameScore;
            document.getElementById('level').textContent = gameLevel;
            document.getElementById('lines').textContent = gameLines;
        }

        function drawTetrisBoard() {
            const canvas = document.getElementById('tetris-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.strokeStyle = '#9bbc0f';
            ctx.lineWidth = 1;
            
            for (let i = 0; i <= 10; i++) {
                ctx.beginPath();
                ctx.moveTo(i * 30, 0);
                ctx.lineTo(i * 30, canvas.height);
                ctx.stroke();
            }
            
            for (let i = 0; i <= 20; i++) {
                ctx.beginPath();
                ctx.moveTo(0, i * 20);
                ctx.lineTo(canvas.width, i * 20);
                ctx.stroke();
            }
        }

        function gameOver() {
            tetrisGame.gameRunning = false;
            clearTimeout(gameOverTimer);
            document.getElementById('game-over-modal').classList.add('active');
        }

        // Pacman functions
        function initializePacman() {
            pacmanGame = {
                score: 0,
                level: 1,
                running: false
            };
        }

        function startPacman() {
            pacmanGame.running = true;
            pacmanGame.score = 0;
            pacmanGame.level = 1;
            document.getElementById('pacman-score').textContent = '0';
            document.getElementById('pacman-level').textContent = '1';
            updateStats('gamesPlayed');
            
            drawPacmanBoard();
            
            if (pacmanInterval) clearInterval(pacmanInterval);
            pacmanInterval = setInterval(updatePacman, 200);
        }

        function pausePacman() {
            pacmanPaused = !pacmanPaused;
        }

        function movePacman(dir) {
            if (!pacmanGame?.running || pacmanPaused) return;
            console.log('Pacman moving:', dir);
        }

        function updatePacman() {
            if (!pacmanGame?.running || pacmanPaused) return;
            drawPacmanBoard();
        }

        function drawPacmanBoard() {
            const canvas = document.getElementById('pacman-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw maze
            ctx.fillStyle = '#00f';
            ctx.fillRect(50, 50, 200, 10); // top wall
            ctx.fillRect(50, 240, 200, 10); // bottom wall
            ctx.fillRect(50, 50, 10, 200);  // left wall
            ctx.fillRect(240, 50, 10, 200); // right wall
            
            // Draw dots
            ctx.fillStyle = '#fff';
            for (let y = 70; y < 230; y += 20) {
                for (let x = 70; x < 230; x += 20) {
                    if (x !== 150 && y !== 150) { // Skip center for Pacman
                        ctx.beginPath();
                        ctx.arc(x, y, 3, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
            }
            
            // Draw Pacman
            ctx.fillStyle = '#ff0';
            ctx.beginPath();
            ctx.arc(150, 150, 15, 0.2, 1.8 * Math.PI);
            ctx.lineTo(150, 150);
            ctx.fill();
        }
    </script>
</body>
</html>
